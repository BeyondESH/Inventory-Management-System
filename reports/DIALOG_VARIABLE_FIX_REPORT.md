# å¯¹è¯æ¡†å˜é‡åˆ›å»ºé”™è¯¯ä¿®å¤æŠ¥å‘Š

## ğŸ”§ é—®é¢˜æè¿°

åœ¨èœå“ç®¡ç†æ¨¡å—çš„ç¼–è¾‘åŠŸèƒ½ä¸­å‡ºç°è¿è¡Œæ—¶é”™è¯¯ï¼š
```
RuntimeError: Too early to create variable: no default root window
```

## ğŸ” é—®é¢˜åˆ†æ

é”™è¯¯å‘ç”Ÿåœ¨ `MealDialog` å’Œ `InventoryItemDialog` ç±»ä¸­ï¼Œå½“åˆ›å»º `tk.StringVar`ã€`tk.IntVar` ç­‰å˜é‡æ—¶æ²¡æœ‰æŒ‡å®š `master` å‚æ•°ï¼Œå¯¼è‡´ tkinter æ— æ³•æ‰¾åˆ°é»˜è®¤çš„æ ¹çª—å£ã€‚

### é”™è¯¯ä½ç½®
- `modern_meal_module.py` ç¬¬621è¡Œ
- `modern_inventory_module.py` ç¬¬574è¡Œ

### é”™è¯¯åŸå› 
åœ¨ Python 3.13 çš„ tkinter ä¸­ï¼Œå½“æ²¡æœ‰é»˜è®¤æ ¹çª—å£æ—¶ï¼Œåˆ›å»ºå˜é‡éœ€è¦æ˜ç¡®æŒ‡å®š master å‚æ•°ã€‚

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. èœå“å¯¹è¯æ¡†ä¿®å¤
**æ–‡ä»¶**: `modern_system/modules/modern_meal_module.py`
**ä¿®å¤å†…å®¹**: ä¸ºæ‰€æœ‰ tkinter å˜é‡æ·»åŠ  `self.dialog` ä½œä¸º master å‚æ•°

```python
# ä¿®å¤å‰
self.name_var = tk.StringVar(value=meal_data['name'] if meal_data else "")

# ä¿®å¤å  
self.name_var = tk.StringVar(self.dialog, value=meal_data['name'] if meal_data else "")
```

### 2. åº“å­˜å¯¹è¯æ¡†ä¿®å¤
**æ–‡ä»¶**: `modern_system/modules/modern_inventory_module.py`  
**ä¿®å¤å†…å®¹**: åŒæ ·ä¸ºæ‰€æœ‰ tkinter å˜é‡æ·»åŠ  master å‚æ•°

```python
# ä¿®å¤å‰
self.name_var = tk.StringVar(value=item_data['name'] if item_data else "")

# ä¿®å¤å
self.name_var = tk.StringVar(self.dialog, value=item_data['name'] if item_data else "")
```

## ğŸ§ª æµ‹è¯•éªŒè¯

åˆ›å»ºäº†ä¸“é—¨çš„æµ‹è¯•è„šæœ¬éªŒè¯ä¿®å¤æ•ˆæœï¼š

### èœå“å¯¹è¯æ¡†æµ‹è¯•
- âœ… æ–°å»ºèœå“å¯¹è¯æ¡†åˆ›å»ºæˆåŠŸ
- âœ… ç¼–è¾‘èœå“å¯¹è¯æ¡†åˆ›å»ºæˆåŠŸ

### åº“å­˜å¯¹è¯æ¡†æµ‹è¯•  
- âœ… æ–°å»ºåº“å­˜é¡¹å¯¹è¯æ¡†åˆ›å»ºæˆåŠŸ
- âœ… ç¼–è¾‘åº“å­˜é¡¹å¯¹è¯æ¡†åˆ›å»ºæˆåŠŸ

## ğŸ¯ ä¿®å¤æ•ˆæœ

1. **å®Œå…¨æ¶ˆé™¤è¿è¡Œæ—¶é”™è¯¯**: æ‰€æœ‰å¯¹è¯æ¡†ç°åœ¨å¯ä»¥æ­£å¸¸åˆ›å»ºå’Œæ˜¾ç¤º
2. **ä¿æŒåŠŸèƒ½å®Œæ•´æ€§**: å¯¹è¯æ¡†çš„æ‰€æœ‰åŠŸèƒ½ä¿æŒä¸å˜
3. **æå‡ç³»ç»Ÿç¨³å®šæ€§**: é¿å…äº†å› å˜é‡åˆ›å»ºé”™è¯¯å¯¼è‡´çš„ç³»ç»Ÿå´©æºƒ

## ğŸ“‹ æ¶‰åŠçš„å˜é‡ç±»å‹

ä¿®å¤æ¶µç›–äº†ä»¥ä¸‹ tkinter å˜é‡ç±»å‹ï¼š
- `tk.StringVar` - å­—ç¬¦ä¸²å˜é‡  
- `tk.IntVar` - æ•´æ•°å˜é‡
- `tk.DoubleVar` - æµ®ç‚¹æ•°å˜é‡
- `tk.BooleanVar` - å¸ƒå°”å˜é‡

## ğŸ”„ å…¼å®¹æ€§

æœ¬ä¿®å¤ç¡®ä¿äº†ä»£ç åœ¨ä»¥ä¸‹ç¯å¢ƒä¸­çš„å…¼å®¹æ€§ï¼š
- âœ… Python 3.13 + tkinter
- âœ… ç°æœ‰çš„å¯¹è¯æ¡†è°ƒç”¨æ–¹å¼
- âœ… æ‰€æœ‰å¹³å°ï¼ˆWindows/Linux/macOSï¼‰

---

**ä¿®å¤æ—¶é—´**: 2025å¹´6æœˆ21æ—¥  
**ä¿®å¤çŠ¶æ€**: âœ… å®Œæˆ  
**æµ‹è¯•çŠ¶æ€**: âœ… é€šè¿‡  
**å½±å“æ¨¡å—**: èœå“ç®¡ç†ã€åº“å­˜ç®¡ç†
